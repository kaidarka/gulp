"use strict";

function testWebP(e) {
  var t = new Image();
  t.onload = t.onerror = function () {
    e(2 == t.height);
  }, t.src = "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";
}

testWebP(function (e) {
  1 == e ? document.querySelector("body").classList.add("webp") : document.querySelector("body").classList.add("no-webp");
});
var animItems = document.querySelectorAll("._anim-items");

if (animItems.length > 0) {
  var animOnScroll = function animOnScroll(e) {
    for (var _e = 0; _e < animItems.length; _e++) {
      var t = animItems[_e],
          o = t.offsetHeight,
          n = offset(t).top,
          i = 4;
      var c = window.innerHeight - o / i;
      o > window.innerHeight && (c = window.innerHeight - o / i), pageYOffset > n - c && pageYOffset < n + o ? t.classList.add("_active") : t.classList.contains("_anim-no-hide") || t.classList.remove("_active");
    }
  };

  var offset = function offset(e) {
    var t = e.getBoundingClientRect(),
        o = window.pageXOffset || document.documentElement.scrollLeft,
        n = window.pageYOffset || document.documentElement.scrollTop;
    return {
      top: t.top + n,
      left: t.left + o
    };
  };

  window.addEventListener("scroll", animOnScroll), setTimeout(function () {
    animOnScroll();
  }, 300);
}

function activeLock() {
  $("#header__menu, #header__burger").removeClass("active"), $("body").removeClass("lock");
}

$(document).ready(function () {
  $(".header__burger").click(function (e) {
    $(".header__burger,.nav__list,.header__menu").toggleClass("active"), $("body").toggleClass("lock");
  });
}), $("#header").click(function () {
  $("html, body").animate({
    scrollTop: $(".header").offset().top
  }, 1e3), activeLock();
}), $("#projects").click(function () {
  $("html, body").animate({
    scrollTop: $(".projects").offset().top -= 100
  }, 1e3), activeLock();
}), $("#mission").click(function () {
  $("html, body").animate({
    scrollTop: $(".mission").offset().top -= 100
  }, 1e3), activeLock();
}), $("#profit").click(function () {
  $("html, body").animate({
    scrollTop: $(".profit").offset().top -= 100
  }, 1e3), activeLock();
}), $("#contacts").click(function () {
  $("html, body").animate({
    scrollTop: $(".contacts").offset().top -= 100
  }, 1e3), activeLock();
}), $("#contacts2").click(function () {
  $("html, body").animate({
    scrollTop: $(".contacts").offset().top -= 100
  }, 1e3);
}), $(function () {
  $(window).scroll(function () {
    $(this).scrollTop() > 10 ? $("#navigation").addClass("fixed") : $(this).scrollTop() < 140 && $("#navigation").removeClass("fixed");
  });
}), $("#sendMail").on("click", function () {
  var e = $("#name").val().trim(),
      t = $("#phone").val().trim();
  return "" == e ? ($("#errorMess").text("Введите имя"), !1) : "" == t ? ($("#errorMess").text("Введите телефон"), !1) : ($("#errorMess").text(""), void $.ajax({
    url: "./ajax/mail.php",
    type: "POST",
    cache: !1,
    data: {
      name: e,
      phone: t
    },
    dataType: "html",
    beforeSend: function beforeSend() {
      $("#sendMali").prop("disabled", !0);
    },
    success: function success(e) {
      e ? $("#mailForm").trigger("reset") : alert("Ошибка, сообщение не отправлено"), $("#sendMail").prop("disabled", !1);
    }
  }));
});